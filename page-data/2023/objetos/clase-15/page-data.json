{
    "componentChunkName": "component---src-templates-blog-post-js",
    "path": "/2023/objetos/clase-15/",
    "result": {"data":{"site":{"siteMetadata":{"title":"Bitácora","author":"pdep"}},"markdownRemark":{"id":"866d30a6-0bf5-5422-9305-e6261099c0ce","excerpt":"¿Qué vimos hoy? Realizamos el ejercicio Pdep cargas y vimos los siguientes conceptos: Self Empezando a realizar el objeto , podríamos pensar esto como primera…","html":"<h2 id=\"qué-vimos-hoy\" style=\"position:relative;\"><a href=\"#qu%C3%A9-vimos-hoy\" aria-label=\"qué vimos hoy permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>¿Qué vimos hoy?</h2>\n<p>Realizamos el ejercicio <a href=\"https://docs.google.com/document/d/1NyGG-c_cpgEvrHH19pM4-x1J0YevSDqVbHqD6DvvlFg/edit\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Pdep cargas</a> y vimos los siguientes conceptos:</p>\n<h3 id=\"self\" style=\"position:relative;\"><a href=\"#self\" aria-label=\"self permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Self</h3>\n<p>Empezando a realizar el objeto <code class=\"language-text\">camionDeVerduras</code>, podríamos pensar esto como primera opción:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">object camionDeVerduras {\n  var kilometraje = 700000\n  var cajones = 10\n\n  method pesoCarga() = cajones * 50\n\n  method velocidadMaxima() = 80 - (cajones * 50) / 500\n}</code></pre></div>\n<p>Esto nos presenta un problema: Tenemos una repetición de lógica entre <code class=\"language-text\">velocidadMaxima</code> y <code class=\"language-text\">pesoCarga</code>. ¿Cómo podríamos llamar a ese mensaje?</p>\n<p>Una opción podría ser <code class=\"language-text\">camionDeVerduras.pesoCarga()</code>, pero vemos que Wollok nos indica un <em>warning</em>:</p>\n<p><code class=\"language-text\">No debe usar el nombre del objeto dentro del mismo. Use 'self'.</code></p>\n<p><code class=\"language-text\">self</code> es una manera con la cual el objeto se conoce a sí mismo. Con <code class=\"language-text\">self</code>, puedo enviar mensajes que entienda el propio objeto, para poder abstraer lógica repetida en otros métodos del mismo objeto. <code class=\"language-text\">self</code> es una referencia al mismo objeto.</p>\n<p>Esto, con <code class=\"language-text\">self</code>, se puede resolver de la siguiente manera:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">object camionDeVerduras {\n  var kilometraje = 700000\n  var cajones = 10\n\n  method pesoCarga() = cajones * 50\n\n  method velocidadMaxima() = 80 - self.pesoCarga() / 500\n}</code></pre></div>\n<p>Hacemos el resto de los camiones, haciendo los métodos con las firmas necesarias (por ejemplo, <code class=\"language-text\">recorrerRuta</code> podría tener diferentes firmas y no estar en el <code class=\"language-text\">scannion5000</code>).</p>\n<h3 id=\"encapsulamiento\" style=\"position:relative;\"><a href=\"#encapsulamiento\" aria-label=\"encapsulamiento permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Encapsulamiento</h3>\n<p>Comenzando a codificar el puesto, podríamos hacer un primer acercamiento:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">object rutatlantica {\n  method pasar(unCamion) {\n    pdepCargas.cobrar(7000 + 100 * unCamion.pesoCarga() / 1000)\n    if (unCamion == camionDeVerduras) {\n       unCamion.kilometraje(unCamion.kilometraje() + 400)\n    } else if (unCamion == camionCerealero) {\n       unCamion.nivelDeDeterioro(unCamion.nivelDeDeterioro() + 0.max(unCamion.velocidadMaxima().min(75) - 45))\n    }\n  }\n}</code></pre></div>\n<p>Hay un poco de ruido en esta solución: ¿Es necesario que comparemos camión por camión para saber qué lógica implementar? ¿Está bien que esta lógica la implemente el puesto? ¿Está bien que el puesto modifique el estado de los camiones?</p>\n<p>La respuesta, según el concepto de encapsulamiento, es <strong>no</strong>.</p>\n<p>El <strong>encapsulamiento</strong> es la buena práctica de minimizar la exposición del estado de nuestros objetos. Es decir, un objeto utiliza la <em>interfaz</em> (mensajes que entiende) de otro para interactuar con él. Cada objeto es responsable de su propio estado, y no el de otros.</p>\n<h3 id=\"responsabilidad\" style=\"position:relative;\"><a href=\"#responsabilidad\" aria-label=\"responsabilidad permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Responsabilidad</h3>\n<p>La <strong>responsabilidad</strong>, a nivel objetos, son las cosas que el objeto es responsable de hacer. Por ejemplo, el puesto <code class=\"language-text\">rutatlantica</code> en este caso NO es responsable de cambiar el kilometraje de los camiones, pero SÍ es responsable de cobrarle a <code class=\"language-text\">pdepCargas</code> una cantidad que debe calcular.\nLa responsabilidad, en la programación con objetos, está relacionada con qué objeto debería resolver las determinadas partes de nuestro problema. Si un objeto no es responsable de hacer algo lo debe delegar en el correspondiente.</p>\n<p>Podríamos hacer un segundo acercamiento:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">object rutatlantica {\n  method pasar(unCamion) {\n    pdepCargas.cobrar(7000 + 100 * unCamion.pesoCarga() / 1000)\n    unCamion.recorrerRuta(400, unCamion.velocidadMaxima().min(75))\n  }\n}</code></pre></div>\n<p>Ahora vemos que le vamos a querer decir a un camión que recorra una ruta. ¿Esto funciona para todos los camiones que hicimos? ¿Qué pasa con la firma del método en los diferentes camiones? ¿Y si no definimos el método?</p>\n<h3 id=\"polimorfismo\" style=\"position:relative;\"><a href=\"#polimorfismo\" aria-label=\"polimorfismo permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Polimorfismo</h3>\n<p>¿Queremos que el método funcione para todos los camiones? Sí, ya que a todo camión que pase por el puesto (¡sin saber cuál va a ser!) se le debe mandar un mensaje para que recorra 400 kms y a 75 km/h como máximo.</p>\n<p>De esto surge el <strong>polimorfismo</strong>: Queremos que <code class=\"language-text\">recorrerRuta(kilometraje, velocidad)</code> lo entiendan todos los camiones, para que <code class=\"language-text\">rutatlantica</code> los pueda usar indistintamente. Es decir, el <strong>polimorfismo</strong> en objetos es la capacidad de que un objeto pueda utilizar indistintamente a otros objetos, siendo que potencialmente estos otros sean distintos. Con esto en mente, deberíamos cambiar el método <code class=\"language-text\">recorrerRuta</code> en todos los camiones:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">object camionDeVerduras {\n\tmethod recorrerRuta(extension, velocidad){\n\t\tkilometraje = kilometraje + extension\n\t}\n}\nobject scanion5000 {\n\tmethod recorrerRuta(extension, velocidad){\n\t\t// no hace nada\n\t}\n}\n\nobject camionCerealero {\n\n\tmethod recorrerRuta(extension, velocidad){\n\t\tnivelDeterioro += 0.max(velocidad - 45)\n\t}\n}</code></pre></div>\n<p>Veamos bien qué es lo que está haciendo el método pasar:</p>\n<ul>\n<li>Se encarga de realizar el cobro a <code class=\"language-text\">pdepCargas</code>.</li>\n<li>Realiza el cálculo para saber cuánto hay que cobrarle.</li>\n<li>Le dice a un camión que recorra una ruta.</li>\n<li>Calcula la velocidad a la cual el camión debe de recorrer la ruta.</li>\n</ul>\n<p>Dentro de estas cuatro cosas que está haciendo el método <code class=\"language-text\">pasar()</code>, ¿Es <em>responsable</em> el método de hacerlo todo? ¿A qué nos referimos por responsable?</p>\n<p>Nos referimos por responsabilidad, en métodos, a eso que el método debe de hacer. Es decir, por ejemplo, que nuestro método <code class=\"language-text\">pasar()</code> tiene responsabilidad “de más”: Cuando pasa un camión sólo le queremos cobrar a <code class=\"language-text\">pdepCargas</code> una cantidad y decirle al camión que recorra la ruta. El resto de la lógica podríamos abstraerla, para poder tener un código más legible y con métodos con sus respectivas “responsabilidades”.</p>\n<p>Esto se vería de la siguiente manera:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">object rutatlantica {\n\tmethod pasar(unCamion) {\n\t  pdepCargas.cobrar(self.costo(unCamion))\n\t  unCamion.recorrerRuta(400, self.velocidadQuePasa(unCamion))\n\t}\n\n\tmethod velocidadQuePasa(unCamion) {\n\t  return unCamion.velocidadMaxima().min(75)\n\t}\n\n\tmethod costo(unCamion) {\n\t  return 7000 + 100 * unCamion.pesoCarga() / 1000\n\t}\n}</code></pre></div>\n<h2 id=\"links-útiles\" style=\"position:relative;\"><a href=\"#links-%C3%BAtiles\" aria-label=\"links útiles permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Links útiles:</h2>\n<ul>\n<li><a href=\"https://github.com/pdep-lunes/pdep-clases-2021/tree/master/objetos/pdepcargas\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Código de la clase</a></li>\n<li><a href=\"https://drive.google.com/file/d/1k4n41gaIBCwyo0T_ZMgryWg5EV2OdZGE/view?usp=sharing\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Video de la clase (2021)</a></li>\n<li><a href=\"https://docs.google.com/document/d/1NyGG-c_cpgEvrHH19pM4-x1J0YevSDqVbHqD6DvvlFg/edit\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Pdep cargas</a></li>\n</ul>","frontmatter":{"title":"Décimo quinta clase","date":"04-09-2023","description":"Décimo quinta clase de PdeP","tags":["objetos","self","encapsulamiento","responsabilidad","polimorfismo"]}}},"pageContext":{"slug":"/2023/objetos/clase-15/","previous":{"fields":{"slug":"/2023/objetos/clase-14/"},"frontmatter":{"title":"Décimo cuarta clase","date":"28-08-2023"}},"next":null}},
    "staticQueryHashes": ["452372368","63159454"]}